<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mega Speedruns Website</title>
<link rel="stylesheet" href="styles.css">
<style>
    body {
        background: url('Mega%20Speedruns_files/bg.png') no-repeat center center fixed;
        background-size: cover;
    }
</style>
<link rel="shortcut icon" type="image/x-icon" href="Mega%20Speedruns_files/logo.png" />   
</head>
<body>
    <header>
        <div class="logo">
            <img src="Mega%20Speedruns_files/logo.png" alt="Logo">           
        </div>
        <nav class="nav-wrapper">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="MSTLP.htm">Level Packs</a></li>
                <li><a href="MMMLevels.htm">MMM Levels</a></li>
                <li><a href="Speedruns.htm">Speedruns</a></li>
                <li><a id="login" href="Login.html">Login</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="home" class="title">
            <div class="title-text">
                <h1>Welcome to The Mega Speedruns Website</h1>
            </div>
        </section>

        <section id="links" class="links">
            <div class="link-list">
                <div class="link-item">
                    <a href="https://www.twitch.tv/megaspeedruns" target="_blank">
                        <img src="Mega%20Speedruns_files/twitch.png" alt="Twitch">
                        <h3>Twitch</h3>
                        <p>Check out our Twitch here</p>
                    </a>
                </div>
                <div class="link-item">
                    <a href="https://discord.gg/g6ajeNYv8p" target="_blank">
                        <img src="Mega%20Speedruns_files/discord.png" alt="Discord">
                        <h3>Discord</h3>
                        <p>Link to join the Discord</p>
                    </a>
                </div>
                <div class="link-item">
                    <a href="https://www.youtube.com/@megaspeedruns8305" target="_blank">
                        <img src="Mega%20Speedruns_files/youtube.png" alt="YouTube">
                        <h3>YouTube</h3>
                        <p>Check out our YouTube here</p>
                    </a>
                </div>
            </div>
        </section>
    </main>
    
    <div class="about">
        <img src="Mega%20Speedruns_files/about.png" alt="MS Logo">
    </div>

    <footer>
        MegaSpeedruns
    </footer>

    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>
    <script src="auth.js"></script>

    <script>
    window.addEventListener("DOMContentLoaded", () => {
        const loginEl = document.getElementById("login");
        const cachedUsername = localStorage.getItem("username");
        if (cachedUsername) {
            loginEl.textContent = cachedUsername;
            loginEl.href = "profile.html";
        } else {
            loginEl.textContent = "Login";
            loginEl.href = "Login.html";
        }
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                try {
                    const snapshot = await db.ref("users/" + user.uid).once("value");
                    const username = snapshot.val()?.username || "Login";
                    loginEl.textContent = username;
                    loginEl.href = "profile.html";
                    localStorage.setItem("username", username);
                } catch (err) {
                    console.error("Failed to fetch username:", err);
                    loginEl.textContent = "Login";
                    loginEl.href = "Login.html";
                }
            } else {
                loginEl.textContent = "Login";
                loginEl.href = "Login.html";
                localStorage.removeItem("username");
            }
        });
    });
    </script>

</body>
</html>
